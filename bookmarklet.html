
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Tracking Codes</title>
        <link type="text/css" rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
        <link type="text/css" rel="stylesheet" href="http://getbootstrap.com/dist/css/bootstrap-theme.min.css">
        <link type="text/css" rel="stylesheet" href="http://getbootstrap.com/examples/theme/theme.css">
        <style>
            .show-table {
                min-width: 450px;
                padding: 5px;
            }
            .show-table td {}
        </style>
        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
          <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->
    </head>
    <body role="document">
 
    <!-- Fixed navbar -->
    <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <span class="navbar-brand" href="#">Social Tools</span>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="dropdown active">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">SHOWS <b class="caret"></b></a>
              <ul class="dropdown-menu show-table">
                <li>
                    <table class="table">
                        <tr>
                            <td><a href="#thirteen-point-seven">13.7</a></td>
                            <td><a href="#a-blog-supreme">A Blog Supreme</a></td>
                            <td><a href="#all-songs">All Songs Considered</a></td>
                            <td><a href="#all-tech">All Tech Considered</a></td>
                        </tr><tr>
                            <td><a href="#atc">All Things Considered</a></td>
                            <td><a href="#alt-latino">Alt. Latino</a></td>
                            <td><a href="#ask-me-another">Ask Me Another</a></td>
                            <td><a href="#code-switch">Code Switch</a></td>
                        </tr><tr>
                            <td><a href="#classical">Classical Music / Deceptive Cadence</a></td>
                            <td><a href="#gen-listen">Generation Listen</a></td>
                            <td><a href="#global-health">Global Health</a></td>
                            <td><a href="#politics">NPR Politics</a></td>
                        </tr><tr>
                            <td><a href="#monkey-see">NPR Monkeysee</a></td>
                            <td><a href="#morning-edition">Morning Edition</a></td>
                            <td><a href="#nprchives">NPR Archives</a></td>
                            <td><a href="#books">NPR Books</a></td>
                        </tr><tr>
                            <td><a href="#business">NPR Business</a></td>
                            <td><a href="#npr-jobs">NPR Jobs</a></td>
                            <td><a href="#movies">NPR Movies</a></td>
                            <td><a href="#music">NPR Music</a></td>
                        </tr><tr>
                            <td><a href="#npr-news">NPR News</a></td>
                            <td><a href="#npr-presents">NPR Presents</a></td>
                            <td><a href="#npr-shop">NPR Online Store</a></td>
                            <td><a href="#npr-viz">NPR Viz Team</a></td>
                        </tr><tr>
                            <td><a href="#npr-olympics">NPR Olympics</a></td>
                            <td><a href="#ombudsman">NPR Ombudsman</a></td>
                            <td><a href="#on-the-road">NPR On The Road</a></td>
                            <td><a href="#parallels">Parallels</a></td>
                        </tr><tr>
                            <td><a href="#picture-show">NPR Picture Show</a></td>
                            <td><a href="#planetmoney">Planet Money</a></td>
                            <td><a href="#the-salt">The Salt</a></td>
                            <td><a href="#science-desk">Science Desk</a></td>
                        </tr><tr>
                            <td><a href="#shots">Shots</a></td>
                            <td><a href="#skunkbear">Skunkbear</a></td>
                            <td><a href="#ted-radio-hour">TED Radio Hour</a></td>
                            <td><a href="#tell-me-more">Tell Me More</a></td>
                        </tr><tr>
                            <td><a href="#breaking-news">The Two-Way</a></td>
                            <td><a href="#this-is-npr">This is NPR</a></td>
                            <td><a href="#wait-wait">Wait Wait...Don't Tell Me</a></td>
                            <td><a href="#weekend-edition">Weekend Edition</a></td>
                        </tr>
                    </table>
                </li>
              </ul>
            </li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>
 
        <div class="container theme-showcase" role="main">
 
            <div class="page-header">
                <h1>Tracking Codes</h1>
                <p class="lead">Google Analytics For Your Pieces</p>
            </div>
 
            <p> In order to track our stories' social distribution using Google Analytics, we have to put tracking codes at the end of each piece. But many desks and shows have stopped doing this because it's time-consuming. We have now automated much of the process, to make it easier for anyone to post links to NPR-branded social media.</p>
 
            <h2>Who should use this tool?</h2>
 
            <p>Anyone who is using an <b>official NPR-branded account.</b> If you're posting a link from NPR.org to the Morning Edition twitter feed or the On The Road tumblr or the Code Switch Facebook account, you must have a tracking code at the end of your piece. We cannot tell how your pieces are doing without this tracking code. You <b>do not</b> need a tracking code if you're posting links from NPR to a personal account.
            <ul>
                <li>If you’re posting to a personal account, don’t append code.</li>
                <li>If you’re posting through an NPR-branded account, the code should match the account you’re posting to, rather than matching the content’s account. (For example, I want to post an NPR On the Road Tumblr post to the NPR News Facebook. I append the NPR News Facebook tracking code.)</li>
                <li>Another example: I want to post a Codeswitch piece to the Codeswitch Facebook page, I append the Codeswitch tracking code. But if I put a Codeswitch piece on the NPR News Facebook page, I append the NPR News Facebook tracking code.</li>
            </ul>
 
            <h2>How does this tool work?</h2>
 
            <p>The tool automatically adds the tracking codes to NPR.org stories for the social media networks you're posting to. For example, let's say I work at NPR Books and I routinely post links from NPR to Facebook, Tumblr, and Twitter.</p>
 
            <ul>
                <li>I click on NPR Books under Pick your show/desk/blog/entity!</li>
                <li>In Chrome, drag the word Facebook to the browser toolbar. Then drag the word Tumblr to the browser toolbar. Finally, drag Twitter to the toolbar.</li>
                <li>For Safari and Firefox click your 'View' menu and then 'Show Bookmarks bar'. Then drag each social network.</li>
                <li>For Internet Explorer click your 'Tools' button, point to 'Toolbars' and click 'Favorites Bar'. Then drag.</li>
                <li>Then go to npr.org and find a story you want to share on Tumblr.</li>
                <li>After the story pops up, click on the Tumblr button on your toolbar.</li>
                <li>The tracking code has been automatically added to the URL. Now I can click on my <a href="https://bitly.com/a/tools">bit.ly link shortener</a> and/or copy to my clipboard and post to Tumblr.</li>
            </ul>
 
            <h3>I need help! Something isn't working! I want to add a new feature.</h3>
            <p>Melody Kramer built this tool. Jeremy Bowers reworked her code and made it much more efficient. If you have any questions, please email <a href="mailto:socialmediateam@npr.org">socialmediateam@npr.org</a> and <a href="mailto:mkramer@npr.org">mkramer@npr.org</a>.</p>
 
 
 
        <!-- This is the Underscore.js template for each of our links. -->
        <!-- I didn't HAVE to make this a template. But I wanted to show -->
        <!-- how you might do this if you were doing it by our standards. -->
        <!-- Inside this script tag, you can write HTML with some little things, -->
        <!-- <%= foo %> means to print the Javascript variable "foo". -->
        <!-- <% %> means you would like to write some Javascript to be evaluated but not printed. -->
        <!-- So if you wanted to print the name of a network, you'd do: -->
        <!--      <%= network.network_name %> -->
        <!-- If you wanted to do a for loop inside the template, you'd do: -->
        <!--      <% _.each(NETWORKS, function(i, network){ console.log(network) }); %> -->
        <!-- This is useful for many reasons. We can talk about those later. -->
        <script type="text/html" class="template-link">
            <li><a href="javascript:<%= javascript_string %>">
                <%= network.network_name %>
            </a></li>
        </script>
 
        <!-- Include jQuery and Underscore.js -->
        <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.0/jquery.js"></script>
        <script type="text/javascript" src="http://underscorejs.org/underscore-min.js"></script>
        <script type="text/javascript" src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
 
        <!-- This is the meat of our script. Notice it goes at the bottom. -->
        <script type="text/javascript">
 
        // Let's define a pair of global variables as constants.
        // This will be your networks and shows.
        // Note that both of these are just arrays of Javascript objects.
        NETWORKS = [
            {
                network_name: "NAME OF SOCIAL NETWORK",
                network_param: "?utm_medium=TRACKINGCODEFORSOCIALNETWORK"
            }, {
                network_name: "NAME OF A DIFFERENT SOCIAL NETWORK",
                network_param: "?utm_medium=TRACKINGCODEFORSOCIALNETWORK2"
            }, 
        ];
 
        SHOWS = [
            {
                show_slug: "SHOW-NAME",
                show_name: "SHOWNAMECONDENSED",
                show_param: "TRACKING_CODE_FOR_SHOW"
            },
        ];
 
        // Now, let's do our actual scripting.
        // I've enclosed this in a $(document).ready() function so as not to execute before
        // the DOM has finished rendering. That's not important for this app so much but it's
        // definitely a best practice.
        $(document).ready(function(){
 
            // Set up a variable where the nav's ul is.
            var $nav_el = $('.navbar-collapse ul');
 
            // Okay, now let's loop over the shows.
            // For each show, let's append a link to the nav (for navigating) and then also
            // append some HTML to the body for the actual bookmarklets and such.
            $.each(SHOWS, function(i, show) {
 
                // Let's make a div with the id of our show's slug.
                $('div.theme-showcase').append('<div class="row" id="' + show.show_slug + '"><ul></ul></div>');
 
                // And then let's cache the element for this thing.
                var $show_el = $('#' + show.show_slug);
                var $show_list_el = $('#' + show.show_slug + ' ul');
 
                // Now, let's append an H2 to that element. We want this to look stylish.
                $show_el.prepend('<h2>' + show.show_name + '</h2>');
 
                // Next, let's loop over all the social networks and add a bookmarklet to
                // this show for each one.
                $.each(NETWORKS, function(i, network){
 
                    // Since we're using a template for the actual bookmarklet, let's parse it.
                    var parsed_template = _.template($('script.template-link').html());
 
                    // Make our bookmarklet as a string. This is the actual Javascript that the
                    // browser will execute as a bookmarklet.
                    var javascript_string = "var bookmarklet=function(){var show='" + show.show_param + "';work='" + network.network_param + "';var today=new Date();var dd=today.getDate();var mm=today.getMonth()+1;var yyyy=today.getFullYear();if(dd<10){dd='0'+dd}if(mm<10){mm='0'+mm}today=mm+dd+yyyy;window.location=(String(window.location).split('?')[0]+work+show+'&utm_content='+today);};bookmarklet();";
 
                    // Next, let's compile our template with some variables we need to make the
                    // template work. We need to know the network, the show and that long
                    // Javascript string that is the bookmarklet.
                    var compiled_template = parsed_template({
                        'javascript_string': javascript_string,
                        'network': network,
                        'show': show
                    });
 
                    // Finally, we need to append that compiled template to the DOM.
                    // Let's stick it inside of that show element we defined earlier.
                    $show_list_el.append(compiled_template);
 
                });
            });
        });
        </script>
    </body>
</html>
